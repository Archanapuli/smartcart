{% extends "user/base.html" %}
{% block content %}

<div class="container ">

<h3 class="fw-bold mb-2 ">All Products</h3>


<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, message in messages %}
    <p style="color:green;">{{ message }}</p>
  {% endfor %}
{% endwith %}
<div class="search-area">

    <!-- Search -->
    <form method="GET" action="/user/products" class="search-form-row">
        <input type="text"
               name="search"
               placeholder="ðŸ”Search products..."
               value="{{ request.args.get('search','') }}"
               class="search-input">

        <button type="submit" class="search-submit">
            SEARCH
        </button>
    </form>

    <!-- Category Filter -->
    <form method="GET" action="/user/products" class="mt-3 d-flex gap-2">
        <select name="category" class="category-select">
            <option value="">All Categories</option>
            {% for cat in categories %}
            <option value="{{ cat.category }}"
                {% if request.args.get('category') == cat.category %}selected{% endif %}>
                {{ cat.category }}
            </option>
            {% endfor %}
        </select>

        <button type="submit" class="filter-btn ms-2">
            Filter
        </button>
    </form>

</div>

<hr>

<!-- Product Cards -->
<div class="product-container">

{% for product in products %}
<div class="product-card">

    <img src="/static/uploads/product_images/{{ product.image }}">

    <h3>{{ product.name }}</h3>
    <p>{{ product.category }}</p>
    <p><strong>â‚¹{{ product.price }}</strong></p>

    <a href="/user/product/{{ product.product_id }}">View Details</a>
</div>
{% endfor %}
</div>

</div>


{% endblock %}
